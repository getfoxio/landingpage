{
  "version": 3,
  "sources": ["../../src/landingpage.ts"],
  "sourcesContent": ["const getfox: any = {\r\n  __params__: {\r\n    key: '',\r\n    username: '',\r\n    apiEndpoint: 'https://api.getfox.io/api',\r\n    build: false,\r\n  },\r\n\r\n  init: (options: any) => {\r\n    return new Promise((resolve, reject) => {\r\n      getfox.__params__.key = options.key\r\n      getfox.__params__.username = ''\r\n      if (!!options.username) {\r\n        getfox.__params__.username = options.username\r\n      }\r\n      getfox.__params__.apiEndpoint = 'https://api.getfox.io/api'\r\n      if (options.apiUrl) {\r\n        getfox.__params__.apiEndpoint = options.apiUrl\r\n      }\r\n      let buildHtml: boolean = true\r\n      if (!!options.build) {\r\n        buildHtml = options.build\r\n      }\r\n\r\n      getfox\r\n        .getUser()\r\n        .then((user: any) => {\r\n          if (user) {\r\n            if (buildHtml) {\r\n              getfox.build(user)\r\n            }\r\n            resolve(user)\r\n          }\r\n        })\r\n        .catch((error: any) => {\r\n          reject(error)\r\n        })\r\n    })\r\n  },\r\n\r\n  openLink: (link: any, linkType: number) => {\r\n    window.open(link, linkType !== 3 ? '_blank' : '_self')\r\n  },\r\n\r\n  getUser: (\r\n    username = getfox.__params__.username,\r\n    key = getfox.__params__.key\r\n  ) => {\r\n    const query = `{\r\n    user(username: \"${username}\",apikey:\"${key}\") {\r\n      id\r\n      username\r\n      email\r\n      profileImage\r\n      language\r\n      appUrl\r\n      landingPage {\r\n        title\r\n        description\r\n        background\r\n        backgroundColor\r\n        backgroundPosition\r\n        textColor\r\n        fontFamily\r\n        textDescriptionColor\r\n        googleAnalyticsId\r\n        blendColor\r\n      }\r\n      socialMedia {\r\n        instagramId\r\n        instagramUsername\r\n        facebookId\r\n        facebookName\r\n        facebookUrl\r\n        twitterId\r\n        twitterName\r\n        twitterUsername\r\n        twitterUrl\r\n      }\r\n      links {\r\n        id\r\n        name\r\n        linkUrl\r\n        linkType\r\n        isClickable\r\n        background\r\n        thumbnail\r\n        path\r\n        product {\r\n          name\r\n          price\r\n          priceLabel\r\n          currency\r\n          quantity\r\n          description\r\n          productImage1\r\n          productImage2\r\n          productImage3\r\n          productImage4\r\n        }\r\n      }\r\n      translations {\r\n        onlyNow\r\n        sale\r\n        special\r\n        buyNow\r\n        rights\r\n        madeWith\r\n        forAll\r\n        foxes\r\n        support\r\n        privacyPolicy\r\n        noLinksFound\r\n      }\r\n    }\r\n  }`\r\n    return getfox\r\n      .fetchApi(query)\r\n      .then((data: any) => {\r\n        if (!!data.errors) {\r\n          console.log('GetfoxAPI: ', data.errors[0].message)\r\n          return null\r\n        }\r\n        if (!data.errors) {\r\n          return data.data.user\r\n        }\r\n      })\r\n      .catch((reason: any) => {\r\n        console.log('GetfoxAPI: Unable to connect to API service.', reason)\r\n      })\r\n  },\r\n\r\n  userlinks: (\r\n    username = getfox.__params__.username,\r\n    key = getfox.__params__.key\r\n  ) => {\r\n    const query = `{\r\n    userlinks(username:\"${username}\",apikey:\"${key}\"){     \r\n      id\r\n      name\r\n      linkUrl\r\n      linkType\r\n      active\r\n      paused\r\n      thumbnail\r\n      background\r\n      isClickable\r\n      path\r\n      product {\r\n        name\r\n        price\r\n        priceLabel\r\n        currency\r\n        quantity\r\n        description\r\n        productImage1\r\n        productImage2\r\n        productImage3\r\n        productImage4\r\n      }\r\n    }\r\n  }`\r\n    return getfox.fetchApi(query).then((data: any) => {\r\n      if (data.errors) {\r\n        throw new Error(data.errors[0].message)\r\n      }\r\n      return data.data.userlinks\r\n    })\r\n  },\r\n\r\n  fetchApi: (query: string) => {\r\n    const options = {\r\n      method: 'post',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        query: query,\r\n      }),\r\n    }\r\n    return fetch(getfox.__params__.apiEndpoint, options).then((res) =>\r\n      res.json()\r\n    )\r\n  },\r\n\r\n  build: (user: any) => {\r\n    const body = document.body\r\n    const html = `\r\n    ${\r\n      user.landingPage.fontFamily\r\n        ? `\r\n    <style>\r\n      .profile-landingpage * {\r\n        font-family:${user.landingPage.fontFamily};\r\n      } \r\n    </style>\r\n    `\r\n        : ''\r\n    }\r\n    <div class=\"profile-landingpage\">\r\n      <div class=\"landing_page__background--overlay\" style=\"\r\n      ${\r\n        user.landingPage.background\r\n          ? `background-image:url(${user.appUrl}/${user.landingPage.background});`\r\n          : ''\r\n      }\r\n      ${\r\n        user.landingPage.backgroundPosition\r\n          ? `background-position:${user.landingPage.backgroundPosition};`\r\n          : ''\r\n      }\r\n      ${\r\n        user.landingPage.backgroundColor\r\n          ? `background-color:${user.landingPage.backgroundColor};`\r\n          : ''\r\n      }\r\n      \"\r\n      >\r\n      <div class=\"fcol landing_page__header${\r\n        !user.landingPage.background ? ' no-background' : ''\r\n      }\"\r\n        style=\"${\r\n          user.landingPage.blendColor\r\n            ? `background-image: linear-gradient(to bottom, ${\r\n                user.landingPage.blendColor\r\n              }, ${user.landingPage.blendColor.slice(0, 7)}00);`\r\n            : ''\r\n        }\"\r\n      >\r\n        <div class=\"frow fc profiles-names\">\r\n        ${\r\n          user.profileImage\r\n            ? `\r\n          <div class=\"profile-image-overlay\" style=\"pointer-events: none;\">\r\n            <form class=\"fc upload-profile-image\">\r\n              <div class=\"fc profile-logo\">\r\n                <label\r\n                  class=\"profile-logo-gfx\"\r\n                  style=\"background-image: url('${user.appUrl}/${\r\n                user.profileImage\r\n              }');\"\r\n                >\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class=\"df flc landing_page__username\">\r\n          <a href=\"${user.appUrl}/${user.username}\" style=\"${\r\n                user.landingPage.textColor\r\n                  ? `color:${user.landingPage.textColor};`\r\n                  : ''\r\n              }\">\r\n              ${user.landingPage.title ? user.landingPage.title : user.username}\r\n              </a>\r\n          </div>\r\n        `\r\n            : ''\r\n        }\r\n        </div>\r\n        <div class=\"df fl frow profiles-names-row landingpage__profiles-names-row\">\r\n        ${\r\n          user.socialMedia.instagramId && user.socialMedia.instagramUsername\r\n            ? `\r\n          <a\r\n          href=\"https://instagram.com/${user.socialMedia.instagramUsername}\"\r\n          target=\"_blank\"\r\n          class=\"fc profile-link--href profile-link--href-icon profile-link--href-ig\"\r\n          style=\"${\r\n            user.landingPage.textColor\r\n              ? `color: ${user.landingPage.textColor};`\r\n              : ''\r\n          }\"\r\n        >\r\n          <img src=\"${\r\n            user.appUrl\r\n          }/static/images/ig-icon-black.svg\" alt=\"instagram\" />\r\n        </a>\r\n        `\r\n            : ''\r\n        }\r\n        ${\r\n          user.socialMedia.facebookId && user.socialMedia.facebookUrl\r\n            ? `\r\n          <a\r\n          href=\"${user.socialMedia.facebookUrl}\"\r\n          target=\"_blank\"\r\n          class=\"fc profile-link--href profile-link--href-icon profile-link--href-ig\"\r\n          style=\"${\r\n            user.landingPage.textColor\r\n              ? `color: ${user.landingPage.textColor};`\r\n              : ''\r\n          }\"\r\n        >\r\n          <img src=\"${\r\n            user.appUrl\r\n          }/static/images/fb-icon-black.svg\" alt=\"facebook\" />\r\n        </a>\r\n        `\r\n            : ''\r\n        }\r\n        ${\r\n          user.socialMedia.twitterId && user.socialMedia.twitterUrl\r\n            ? `\r\n          <a\r\n          href=\"${user.socialMedia.twitterUrl}\" }}\"\r\n          target=\"_blank\"\r\n          class=\"fc profile-link--href profile-link--href-icon profile-link--href-ig\"\r\n          style=\"${\r\n            user.landingPage.textColor\r\n              ? `color: ${user.landingPage.textColor};`\r\n              : ''\r\n          }\"\r\n        >\r\n          <img src=\"${\r\n            user.appUrl\r\n          }/static/images/twitter-icon-black.svg\" alt=\"twitter\" />\r\n        </a>\r\n        `\r\n            : ''\r\n        }\r\n        </div>\r\n        ${\r\n          user.landingPage.description\r\n            ? `\r\n          <div class=\"frow fc landing_page__introtext--wrap\">\r\n            <div class=\"f1 landing_page__introtext\"\r\n            style=\"${\r\n              user.landingPage.textDescriptionColor\r\n                ? `color: ${user.landingPage.textDescriptionColor};`\r\n                : ''\r\n            }\">${user.landingPage.description}</div>\r\n        </div>\r\n        `\r\n            : ''\r\n        }\r\n      </div>\r\n      <div class=\"fcol landing_page__content page-content--dashboard\">\r\n      <ul class=\"landing_page__links-list sortable-list\">\r\n      ${\r\n        !user.links.length\r\n          ? `\r\n        <div class=\"fc\">${user.translations.noLinksFound}</div>\r\n      `\r\n          : `${user.links\r\n              .map((link: any) => {\r\n                let linkImageSource = ''\r\n                if (!!link.background) {\r\n                  linkImageSource = link.background\r\n                }\r\n                if (!!link.thumbnail) {\r\n                  linkImageSource = link.thumbnail\r\n                }\r\n                if (!!link.product && !!link.product.productImage1) {\r\n                  linkImageSource = link.product.productImage1\r\n                }\r\n                if (!!link.product && !!link.product.productImage2) {\r\n                  linkImageSource = link.product.productImage2\r\n                }\r\n                if (!!link.product && !!link.product.productImage3) {\r\n                  linkImageSource = link.product.productImage3\r\n                }\r\n                if (!!link.product && !!link.product.productImage4) {\r\n                  linkImageSource = link.product.productImage4\r\n                }\r\n                let linkImage = ''\r\n                if (!!linkImageSource) {\r\n                  linkImage = `<div class=\"link-resource-thumb\" style=\"background-image:url(${user.appUrl}/${linkImageSource});\"></div>`\r\n                }\r\n                return `<li \r\n                class=\"df flc frow landing_page__link-row ${\r\n                  link.isClickable ? 'landing_page__link-row--clickable' : ''\r\n                } link-resource sortable-list__item with-thumb\"\r\n                ${\r\n                  link.isClickable\r\n                    ? `onclick=\"javascript:getfox.openLink('${link.path}', ${link.linkType})\"`\r\n                    : ''\r\n                }\r\n                >\r\n                ${linkImage}\r\n                <a class=\"f1 fcol\">\r\n                  <div class=\"f1 fc\">${link.name}</div>\r\n                  ${\r\n                    link.product\r\n                      ? `\r\n                  <div class=\"f1 fc\">   \r\n                    <div class=\"flc landingpage__shoplinkproduct-attributes\">\r\n                      <span class=\"product-label\">\r\n                        ${\r\n                          link.product.priceLabel === 'onlynow'\r\n                            ? user.translations.onlyNow\r\n                            : ''\r\n                        }\r\n                        ${\r\n                          link.product.priceLabel === 'sale'\r\n                            ? user.translations.sale\r\n                            : ''\r\n                        }\r\n                        ${\r\n                          link.product.priceLabel === 'special'\r\n                            ? user.translations.special\r\n                            : ''\r\n                        }\r\n                      </span>\r\n                      <span class=\"product-price\">${link.product.price} ${\r\n                          link.product.currency\r\n                        }</span> \r\n                      <span class=\"product-buy-now\">${\r\n                        user.translations.buyNow\r\n                      }</span>\r\n                    </div>\r\n                  </div>\r\n                  `\r\n                      : ''\r\n                  }\r\n                </a>\r\n          </li>`\r\n              })\r\n              .join('')}\r\n      `\r\n      }\r\n        </ul>\r\n        </div>\r\n        <div class=\"f1 frt copyright copyright-footer\">\r\n          <div class=\"df frt footer-links\">\r\n            <a class=\"footer-link\" href=\"${\r\n              user.appUrl\r\n            }/static/support\" target=\"_blank\">${user.translations.support}</a>\r\n            <a class=\"footer-link\" href=\"${\r\n              user.appUrl\r\n            }/static/privacy\" target=\"_blank\">${\r\n      user.translations.privacyPolicy\r\n    }</a>\r\n          </div>\r\n          <div class=\"frt footer-links\">\r\n            <div class=\"fcol\">\r\n              <p class=\"df\">&copy;. <a href=\"https://getfox.io\" class=\"footer-link-getfox\" target=\"\">Getfox</a>. ${\r\n                user.translations.rights\r\n              }.<br/></p>\r\n              <p class=\"frt\">${user.translations.madeWith}\u2764\uFE0F${\r\n      user.translations.forAll\r\n    } <a class=\"footer-link-fox\" href=\"https://gifts.worldwildlife.org/gift-center/gifts/species-adoptions/red-fox.aspx\" target=\"_blank\"> ${\r\n      user.translations.foxes\r\n    }</a>.</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `\r\n    body.insertAdjacentHTML('beforeend', html)\r\n  },\r\n}\r\ngetfox"],
  "mappings": "2EAAA",
  "names": []
}
